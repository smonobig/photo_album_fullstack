{"ast":null,"code":"import { useSyntheticBlurEvent as $8a9cb279dc87e130$export$715c682d09d639cc } from \"./utils.module.js\";\nimport { useCallback as $hf0lj$useCallback } from \"react\";\nimport { getOwnerDocument as $hf0lj$getOwnerDocument, getActiveElement as $hf0lj$getActiveElement, getEventTarget as $hf0lj$getEventTarget } from \"@react-aria/utils\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ // Portions of the code in this file are based on code from react.\n// Original licensing for the following can be found in the\n// NOTICE file in the root directory of this source tree.\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\n\nfunction $a1ea59d68270f0dd$export$f8168d8dd8fd66e6(props) {\n  let {\n    isDisabled: isDisabled,\n    onFocus: onFocusProp,\n    onBlur: onBlurProp,\n    onFocusChange: onFocusChange\n  } = props;\n  const onBlur = (0, $hf0lj$useCallback)(e => {\n    if (e.target === e.currentTarget) {\n      if (onBlurProp) onBlurProp(e);\n      if (onFocusChange) onFocusChange(false);\n      return true;\n    }\n  }, [onBlurProp, onFocusChange]);\n  const onSyntheticFocus = (0, $8a9cb279dc87e130$export$715c682d09d639cc)(onBlur);\n  const onFocus = (0, $hf0lj$useCallback)(e => {\n    // Double check that document.activeElement actually matches e.target in case a previously chained\n    // focus handler already moved focus somewhere else.\n    const ownerDocument = (0, $hf0lj$getOwnerDocument)(e.target);\n    const activeElement = ownerDocument ? (0, $hf0lj$getActiveElement)(ownerDocument) : (0, $hf0lj$getActiveElement)();\n    if (e.target === e.currentTarget && activeElement === (0, $hf0lj$getEventTarget)(e.nativeEvent)) {\n      if (onFocusProp) onFocusProp(e);\n      if (onFocusChange) onFocusChange(true);\n      onSyntheticFocus(e);\n    }\n  }, [onFocusChange, onFocusProp, onSyntheticFocus]);\n  return {\n    focusProps: {\n      onFocus: !isDisabled && (onFocusProp || onFocusChange || onBlurProp) ? onFocus : undefined,\n      onBlur: !isDisabled && (onBlurProp || onFocusChange) ? onBlur : undefined\n    }\n  };\n}\nexport { $a1ea59d68270f0dd$export$f8168d8dd8fd66e6 as useFocus };","map":{"version":3,"sources":["packages/@react-aria/interactions/src/useFocus.ts"],"names":[],"mappings":";;;;AAAA;;;;;;;;;;AAUC,GAVD,CAYA;AACA;AACA;AACA;;AAqBO,SAAS,yCAAA,CAA6D,KAAyB,EAAA;EACpG,IAAI;IAAA,UAAA,EACF,UAAU;IACV,OAAA,EAAS,WAAW;IACpB,MAAA,EAAQ,UAAU;IAAA,aAAA,EAClB;EAAa,CACd,GAAG,KAAA;EAEJ,MAAM,MAAA,GAAuC,CAAA,CAAA,EAAA,kBAAU,EAAG,CAAA,IAAA;IACxD,IAAI,CAAA,CAAE,MAAM,KAAK,CAAA,CAAE,aAAa,EAAE;MAChC,IAAI,UAAA,EACF,UAAA,CAAW,CAAA,CAAA;MAGb,IAAI,aAAA,EACF,aAAA,CAAc,KAAA,CAAA;MAGhB,OAAO,IAAA;IACT;EACF,CAAA,EAAG,CAAC,UAAA,EAAY,aAAA,CAAc,CAAA;EAG9B,MAAM,gBAAA,GAAmB,CAAA,CAAA,EAAA,yCAAoB,EAAU,MAAA,CAAA;EAEvD,MAAM,OAAA,GAAyC,CAAA,CAAA,EAAA,kBAAU,EAAG,CAAA,IAAA;IAC1D;IACA;IAEA,MAAM,aAAA,GAAgB,CAAA,CAAA,EAAA,uBAAe,EAAE,CAAA,CAAE,MAAM,CAAA;IAC/C,MAAM,aAAA,GAAgB,aAAA,GAAgB,CAAA,CAAA,EAAA,uBAAe,EAAE,aAAA,CAAA,GAAiB,CAAA,CAAA,EAAA,uBAAe,EAAA,CAAA;IACvF,IAAI,CAAA,CAAE,MAAM,KAAK,CAAA,CAAE,aAAa,IAAI,aAAA,KAAkB,CAAA,CAAA,EAAA,qBAAa,EAAE,CAAA,CAAE,WAAW,CAAA,EAAG;MACnF,IAAI,WAAA,EACF,WAAA,CAAY,CAAA,CAAA;MAGd,IAAI,aAAA,EACF,aAAA,CAAc,IAAA,CAAA;MAGhB,gBAAA,CAAiB,CAAA,CAAA;IACnB;EACF,CAAA,EAAG,CAAC,aAAA,EAAe,WAAA,EAAa,gBAAA,CAAiB,CAAA;EAEjD,OAAO;IACL,UAAA,EAAY;MACV,OAAA,EAAU,CAAC,UAAA,KAAe,WAAA,IAAe,aAAA,IAAiB,UAAS,CAAA,GAAM,OAAA,GAAU,SAAA;MACnF,MAAA,EAAS,CAAC,UAAA,KAAe,UAAA,IAAc,aAAY,CAAA,GAAM,MAAA,GAAS;IACpE;EACF,CAAA;AACF","sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n// Portions of the code in this file are based on code from react.\n// Original licensing for the following can be found in the\n// NOTICE file in the root directory of this source tree.\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\n\nimport {DOMAttributes, FocusableElement, FocusEvents} from '@react-types/shared';\nimport {FocusEvent, useCallback} from 'react';\nimport {getActiveElement, getEventTarget, getOwnerDocument} from '@react-aria/utils';\nimport {useSyntheticBlurEvent} from './utils';\n\nexport interface FocusProps<Target = FocusableElement> extends FocusEvents<Target> {\n  /** Whether the focus events should be disabled. */\n  isDisabled?: boolean\n}\n\nexport interface FocusResult<Target = FocusableElement> {\n  /** Props to spread onto the target element. */\n  focusProps: DOMAttributes<Target>\n}\n\n/**\n * Handles focus events for the immediate target.\n * Focus events on child elements will be ignored.\n */\nexport function useFocus<Target extends FocusableElement = FocusableElement>(props: FocusProps<Target>): FocusResult<Target> {\n  let {\n    isDisabled,\n    onFocus: onFocusProp,\n    onBlur: onBlurProp,\n    onFocusChange\n  } = props;\n\n  const onBlur: FocusProps<Target>['onBlur'] = useCallback((e: FocusEvent<Target>) => {\n    if (e.target === e.currentTarget) {\n      if (onBlurProp) {\n        onBlurProp(e);\n      }\n\n      if (onFocusChange) {\n        onFocusChange(false);\n      }\n\n      return true;\n    }\n  }, [onBlurProp, onFocusChange]);\n\n\n  const onSyntheticFocus = useSyntheticBlurEvent<Target>(onBlur);\n\n  const onFocus: FocusProps<Target>['onFocus'] = useCallback((e: FocusEvent<Target>) => {\n    // Double check that document.activeElement actually matches e.target in case a previously chained\n    // focus handler already moved focus somewhere else.\n\n    const ownerDocument = getOwnerDocument(e.target);\n    const activeElement = ownerDocument ? getActiveElement(ownerDocument) : getActiveElement();\n    if (e.target === e.currentTarget && activeElement === getEventTarget(e.nativeEvent)) {\n      if (onFocusProp) {\n        onFocusProp(e);\n      }\n\n      if (onFocusChange) {\n        onFocusChange(true);\n      }\n\n      onSyntheticFocus(e);\n    }\n  }, [onFocusChange, onFocusProp, onSyntheticFocus]);\n\n  return {\n    focusProps: {\n      onFocus: (!isDisabled && (onFocusProp || onFocusChange || onBlurProp)) ? onFocus : undefined,\n      onBlur: (!isDisabled && (onBlurProp || onFocusChange)) ? onBlur : undefined\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}